{"version":3,"sources":["webpack:///./src/views/frontend/Products.vue?77d9","webpack:///./src/views/frontend/Products.vue?f402","webpack:///src/views/frontend/Products.vue","webpack:///./src/views/frontend/Products.vue?d1b1","webpack:///./src/views/frontend/Products.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isLoading","on","$event","_v","filtercategory","_s","class","active","preventDefault","_l","item","key","id","style","backgroundImage","imageUrl","title","category","domProps","content","origin_price","price","_f","loadingItem","addToCart","staticRenderFns","products","categories","getProducts","methods","vm","api","$http","get","then","res","data","categoryName","carts","product","quantity","post","$bus","$emit","icon","computed","filter","component"],"mappings":"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","file":"js/chunk-1cd3606c.291a9d4f.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Products.vue?vue&type=style&index=0&id=790fd9cb&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Products.vue?vue&type=style&index=0&id=790fd9cb&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper container py-4\"},[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('nav',{attrs:{\"aria-label\":\"breadcrumb\"}},[_c('ol',{staticClass:\"breadcrumb bg-white font-weight-bold\"},[_c('li',{staticClass:\"breadcrumb-item\"},[_c('router-link',{staticClass:\"text-dark\",attrs:{\"to\":\"/\"}},[_vm._v(\"首頁\")])],1),(_vm.filtercategory === '')?_c('li',{staticClass:\"breadcrumb-item text-primary\"},[_vm._v(\"全茶品\")]):_c('li',{staticClass:\"breadcrumb-item text-primary\"},[_vm._v(_vm._s(_vm.filtercategory))])])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-3 mb-3\"},[_c('ul',{staticClass:\"list-group\"},[_c('a',{staticClass:\"list-group-item list-group-item-action\",class:{active: _vm.filtercategory === ''},attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.filtercategory = ''}}},[_vm._v(\"全茶品\")]),_vm._l((_vm.categories),function(item){return _c('a',{key:item,staticClass:\"list-group-item list-group-item-action\",class:{active: item === _vm.filtercategory},attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.filtercategory = item}}},[_vm._v(_vm._s(item))])})],2)]),_c('div',{staticClass:\"col-md-9\"},[_c('div',{staticClass:\"row\"},_vm._l((_vm.filtercategories),function(item){return _c('div',{key:item.id,staticClass:\"col-lg-4 col-md-6 mb-4\"},[_c('router-link',{attrs:{\"to\":(\"/product/\" + (item.id))}},[_c('div',{staticClass:\"card-deck h-100\"},[_c('div',{staticClass:\"card rounded shadow\"},[_c('div',{staticClass:\"product-img\",style:({backgroundImage: (\"url(\" + (item.imageUrl[0]) + \")\")})}),_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"d-flex justify-content-between align-items-center mb-2\"},[_c('h5',{staticClass:\"card-title d-inline mb-0 font-weight-bold\"},[_vm._v(_vm._s(item.title))]),_c('span',{staticClass:\"badge badge-primary\"},[_vm._v(_vm._s(item.category))])]),_c('p',{staticClass:\"card-text\",domProps:{\"innerHTML\":_vm._s(item.content)}},[_vm._v(_vm._s(item.content))]),_c('div',{staticClass:\"text-right\"},[(item.origin_price === item.price)?_c('div',{staticClass:\"h5\"},[_vm._v(\"原價\"+_vm._s(_vm._f(\"money\")(item.origin_price)))]):_c('div',{staticClass:\"price\"},[_c('del',{staticClass:\"h6\"},[_vm._v(\"原價\"+_vm._s(_vm._f(\"money\")(item.origin_price)))]),_c('div',{staticClass:\"h5 text-danger font-weight-bold mb-0\"},[_vm._v(\"現在只要\"+_vm._s(_vm._f(\"money\")(item.price)))])])])])]),_c('div',{staticClass:\"card-footer\"},[_c('button',{staticClass:\"btn btn-outline-primary btn-block ml-auto\",attrs:{\"disabled\":_vm.loadingItem === item.id,\"type\":\"button\"},on:{\"click\":function($event){return _vm.addToCart(item.id)}}},[(_vm.loadingItem === item.id)?_c('i',{staticClass:\"fas fa-spinner fa-spin\"}):_c('i',{staticClass:\"fa fa-cart-plus\"}),_vm._v(\" 加到購物車 \")])])])])])],1)}),0)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"wrapper container py-4\">\r\n    <loading :active.sync=\"isLoading\"></loading>\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ol class=\"breadcrumb bg-white font-weight-bold\">\r\n        <li class=\"breadcrumb-item\">\r\n          <router-link class=\"text-dark\" to=\"/\">首頁</router-link>\r\n        </li>\r\n        <li class=\"breadcrumb-item text-primary\" v-if=\"filtercategory === ''\">全茶品</li>\r\n        <li class=\"breadcrumb-item text-primary\" v-else>{{ filtercategory }}</li>\r\n      </ol>\r\n    </nav>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-3 mb-3\">\r\n        <ul class=\"list-group\">\r\n          <a href=\"#\" class=\"list-group-item list-group-item-action\" @click.prevent=\"filtercategory = ''\"\r\n            :class=\"{active: filtercategory === ''}\">全茶品</a>\r\n          <a href=\"#\" class=\"list-group-item list-group-item-action\" @click.prevent=\"filtercategory = item\"\r\n            :class=\"{active: item === filtercategory}\" v-for=\"item in categories\" :key=\"item\">{{ item }}</a>\r\n        </ul>\r\n      </div>\r\n      <div class=\"col-md-9\">\r\n        <div class=\"row\">\r\n          <div class=\"col-lg-4 col-md-6 mb-4\" v-for=\"item in filtercategories\" :key=\"item.id\">\r\n            <router-link :to=\"`/product/${ item.id }`\">\r\n              <div class=\"card-deck h-100\">\r\n                <div class=\"card rounded shadow\">\r\n                  <div class=\"product-img\" :style=\"{backgroundImage: `url(${item.imageUrl[0]})`}\"></div>\r\n                  <div class=\"card-body\">\r\n                    <div class=\"content\">\r\n                      <div class=\"d-flex justify-content-between align-items-center mb-2\">\r\n                        <h5 class=\"card-title d-inline mb-0 font-weight-bold\">{{ item.title }}</h5>\r\n                        <span class=\"badge badge-primary\">{{ item.category }}</span>\r\n                      </div>\r\n                      <p class=\"card-text\" v-html=\"item.content\">{{ item.content }}</p>\r\n                      <div class=\"text-right\">\r\n                        <div class=\"h5\" v-if=\"item.origin_price === item.price\">原價{{ item.origin_price | money }}</div>\r\n                        <div class=\"price\" v-else>\r\n                          <del class=\"h6\">原價{{ item.origin_price | money }}</del>\r\n                          <div class=\"h5 text-danger font-weight-bold mb-0\">現在只要{{ item.price | money }}</div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"card-footer\">\r\n                    <button :disabled=\"loadingItem === item.id\" type=\"button\"\r\n                      class=\"btn btn-outline-primary btn-block ml-auto\" @click=\"addToCart(item.id)\">\r\n                    <i class=\"fas fa-spinner fa-spin\" v-if=\"loadingItem === item.id\"></i>\r\n                    <i v-else class=\"fa fa-cart-plus\"></i>\r\n                      加到購物車\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </router-link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Toast from '@/swal'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      products: [],\r\n      categories: ['茶葉類', '沖泡類', '組合包'],\r\n      filtercategory: '',\r\n      loadingItem: '',\r\n      isLoading: false\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  },\r\n  methods: {\r\n    getProducts () {\r\n      const vm = this\r\n      vm.isLoading = true\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/products`\r\n      vm.$http.get(api).then((res) => {\r\n        vm.products = res.data.data// 將回傳的資料存入預先定義好的products陣列\r\n        const { categoryName } = vm.$route.params\r\n        if (categoryName) {\r\n          vm.filtercategory = categoryName\r\n        }\r\n        vm.isLoading = false\r\n      })\r\n        .catch(() => {\r\n          Toast.fire({\r\n            title: '無法取得資料，稍後再試',\r\n            icon: 'error'\r\n          })\r\n          vm.isLoading = false\r\n        })\r\n    },\r\n    addToCart (id, quantity = 1) {\r\n      const vm = this\r\n      vm.loadingItem = id\r\n      vm.isLoading = true\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`\r\n      const carts = {\r\n        product: id,\r\n        quantity: quantity\r\n      }\r\n      vm.$http.post(api, carts).then(() => {\r\n        vm.$bus.$emit('update-total')\r\n        Toast.fire({\r\n          title: '該商品已加入購物車',\r\n          icon: 'success'\r\n        })\r\n        vm.loadingItem = ''\r\n        vm.isLoading = false\r\n      })\r\n        .catch((error) => {\r\n          const errorinfo = error.response.data.errors\r\n          if (errorinfo) {\r\n            Toast.fire({\r\n              title: `${errorinfo}`,\r\n              icon: 'warning'\r\n            })\r\n          }\r\n          vm.loadingItem = ''\r\n          vm.isLoading = false\r\n        })\r\n    }\r\n  },\r\n  computed: {\r\n    filtercategories () {\r\n      if (this.filtercategory) {\r\n        return this.products.filter((item) => {\r\n          const data = item.category\r\n            .toLowerCase()\r\n            .includes(this.filtercategory.toLowerCase())\r\n          return data\r\n        })\r\n      }\r\n      return this.products\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../../assets/scss/frontend/main';\r\n\r\n.product-img {\r\n  width: 100%;\r\n  height: 130px;\r\n  background-position: center;\r\n  background-size: cover;\r\n}\r\n\r\n.content {\r\n  .card-title,\r\n  .card-text {\r\n    color: $black;\r\n  }\r\n}\r\n\r\n.price {\r\n  .h6 {\r\n    color: $black;\r\n  }\r\n}\r\n\r\n.card:hover .product-img {\r\n  opacity: 0.5;\r\n}\r\n\r\n.card:hover .content {\r\n  opacity: 0.5;\r\n}\r\n\r\n@include media-breakpoint-down(lg) {\r\n  .card-title {\r\n    font-size: 1.375rem;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Products.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Products.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Products.vue?vue&type=template&id=790fd9cb&scoped=true&\"\nimport script from \"./Products.vue?vue&type=script&lang=js&\"\nexport * from \"./Products.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Products.vue?vue&type=style&index=0&id=790fd9cb&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"790fd9cb\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}