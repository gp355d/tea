(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bdc8f1ac"],{5310:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"wrapper container py-4"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("div",{staticClass:"row justify-content-center"},[t.carts.length>0?s("div",{staticClass:"col-md-8 bg-white shadow shopcart-layout"},[s("div",{staticClass:"cart p-3"},[s("router-link",{staticClass:"h5 text-dark back",attrs:{to:"/products"}},[s("i",{staticClass:"fas fa-chevron-left mr-2"}),s("span",{staticClass:"continue"},[t._v("繼續購物")])]),t._m(0),t._l(t.carts,(function(a){return s("div",{key:a.product.id+1,staticClass:"cart-list d-flex mt-0 bg-light flex-sm-nowrap mb-3"},[s("div",{staticClass:"img-fluid shopcart-img",style:{backgroundImage:"url("+a.product.imageUrl[0]+")"},attrs:{alt:"product-img"}}),s("div",{staticClass:"w-100 p-3 shopcart-content"},[s("a",{staticClass:"shopcart-remove-item",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.removeCartItem(a.product.id)}}},[s("i",{staticClass:"fas fa-times"})]),s("p",{staticClass:"mb-0 font-weight-bold"},[t._v(t._s(a.product.title))]),s("p",{staticClass:"mb-1 text-muted",staticStyle:{"font-size":"14px"}},[t._v(t._s(a.product.content))]),s("div",{staticClass:"d-flex justify-content-between align-items-center w-100"},[s("div",{staticClass:"input-group flex-nowrap flex-lg-nowrap"},[s("div",{staticClass:"control d-flex"},[s("div",{staticClass:"input-group-prepend pr-1"},[s("button",{staticClass:"btn btn-outline-primary rounded-0 border-0",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(s){return s.preventDefault(),t.updateQuanity(a.product.id,a.quantity-1)}}},[s("i",{staticClass:"fas fa-minus"})])]),s("input",{staticClass:"form-control border-0 text-center my-auto shadow-none bg-light px-0",attrs:{min:"1",disabled:"",type:"number",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1"},domProps:{value:a.quantity},on:{change:function(s){return t.updateQuanity(a.product.id,a.quantity)}}}),s("div",{staticClass:"input-group-append pl-1"},[s("button",{staticClass:"btn btn-outline-primary rounded-0 border-0",attrs:{type:"button"}},[s("i",{staticClass:"fas fa-plus",on:{click:function(s){return s.preventDefault(),t.updateQuanity(a.product.id,a.quantity+1)}}})])])]),s("p",{staticClass:"w-50 mb-0 ml-auto text-right h5 d-flex align-items-center justify-content-end"},[t._v(t._s(t._f("money")(a.product.price))+"/"+t._s(a.product.unit))])])])])])})),s("div",{staticClass:"d-flex justify-content-between mt-4"},[s("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("總計")]),s("p",{staticClass:"mb-0 h4 font-weight-bold text-danger"},[t._v(t._s(t._f("money")(t.cartTotal)))])]),s("router-link",{staticClass:"btn btn-primary btn-block mt-4 rounded-0 py-3",attrs:{to:"/order"}},[t._v("確認訂單")])],2)]):s("div",{staticClass:"col-md-8 bg-white",staticStyle:{"min-height":"calc(100vh - 56px - 76px)"}},[s("router-link",{staticClass:"h5 text-dark back",attrs:{to:"/products"}},[s("i",{staticClass:"fas fa-chevron-left mr-2"}),s("span",{staticClass:"continue"},[t._v("繼續購物")])]),t._m(1)],1)])],1)},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h2",{staticClass:"font-weight-bold mb-3"},[s("i",{staticClass:"fas fa-leaf mr-2 text-primary"}),t._v("購物車清單")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h2",{staticClass:"mt-2 font-weight-bold"},[s("i",{staticClass:"fas fa-leaf mr-2 text-primary"}),t._v("目前購物車無商品，快去逛逛")])}],c=s("3508"),n={data(){return{carts:[],cartTotal:0,isLoading:!1}},created(){this.getCart()},methods:{getCart(){const t=this;t.isLoading=!0;const a="https://course-ec-api.hexschool.io/api/d52eae5f-b113-4dd1-81cc-46bd383ac57a/ec/shopping";t.$http.get(a).then(a=>{t.carts=a.data.data,t.updateTotal(),t.isLoading=!1}).catch(a=>{c["a"].fire({title:""+a.response,icon:"error"}),t.isLoading=!1})},updateTotal(){const t=this;let a=0;t.carts.forEach(s=>{a+=s.product.price*s.quantity,t.cartTotal=a})},updateQuanity(t,a){const s=this;s.isLoading=!0;const e="https://course-ec-api.hexschool.io/api/d52eae5f-b113-4dd1-81cc-46bd383ac57a/ec/shopping",i={product:t,quantity:a};s.$http.patch(e,i).then(()=>{s.getCart(),c["a"].fire({text:"商品已更正數量",icon:"success"}),s.isLoading=!1}).catch(t=>{c["a"].fire({title:""+t.response,icon:"error"}),s.isLoading=!1})},removeCartItem(t){const a=this;a.isLoading=!0;const s="https://course-ec-api.hexschool.io/api/d52eae5f-b113-4dd1-81cc-46bd383ac57a/ec/shopping/"+t;a.$http.delete(s).then(()=>{a.$bus.$emit("update-total"),a.getCart(),c["a"].fire({text:"商品已刪除",icon:"success"}),a.isLoading=!1}).catch(t=>{c["a"].fire({title:""+t.response,icon:"error"}),a.isLoading=!1})},removeAllCartItem(){const t=this;t.isLoading=!0;const a="https://course-ec-api.hexschool.io/api/d52eae5f-b113-4dd1-81cc-46bd383ac57a/ec/shopping/all/product";t.$http.delete(a).then(()=>{t.$bus.$emit("update-total"),t.getCart(),c["a"].fire({text:"商品已全部刪除",icon:"success"}),t.isLoading=!1}).catch(a=>{c["a"].fire({title:""+a.response,icon:"error"}),t.isLoading=!1})}}},o=n,r=(s("f9c4"),s("2877")),d=Object(r["a"])(o,e,i,!1,null,"fe9cd2de",null);a["default"]=d.exports},"88bd":function(t,a,s){},f9c4:function(t,a,s){"use strict";var e=s("88bd"),i=s.n(e);i.a}}]);
//# sourceMappingURL=chunk-bdc8f1ac.7c3bc3f3.js.map